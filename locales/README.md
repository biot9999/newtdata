# å¤šè¯­è¨€å›½é™…åŒ– (i18n) ç³»ç»Ÿ

## æ¦‚è¿°

æœ¬ç³»ç»Ÿä¸º Telegram è´¦å·æ£€æµ‹æœºå™¨äººæä¾›å®Œæ•´çš„å¤šè¯­è¨€æ”¯æŒï¼Œç›®å‰æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡ä¸¤ç§è¯­è¨€ã€‚

## æ–‡ä»¶ç»“æ„

```
newtdata/
â”œâ”€â”€ i18n.py                   # å¤šè¯­è¨€ç®¡ç†å™¨
â”œâ”€â”€ locales/                  # å¤šè¯­è¨€æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ zh.json              # ä¸­æ–‡ç¿»è¯‘
â”‚   â””â”€â”€ en.json              # è‹±æ–‡ç¿»è¯‘
â””â”€â”€ user_languages.json      # ç”¨æˆ·è¯­è¨€åå¥½ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

## ä½¿ç”¨æ–¹æ³•

### åˆå§‹åŒ–

```python
from i18n import I18n

# åˆå§‹åŒ–å¤šè¯­è¨€ç®¡ç†å™¨
i18n = I18n(locales_dir='locales', default_lang='zh')
```

### è·å–ç¿»è¯‘

```python
# ç®€å•ç¿»è¯‘
text = i18n.get(user_id, 'start.button_check')
# è¾“å‡º: ğŸš€ è´¦å·æ£€æµ‹

# å¸¦å‚æ•°çš„ç¿»è¯‘
text = i18n.get(
    user_id, 
    'start.welcome',
    first_name="å¼ ä¸‰",
    uid=12345,
    member_status="VIP",
    expiry="2024-12-31",
    proxy_status="å¯ç”¨",
    proxy_count=10,
    current_time="2024-01-01"
)
```

### è®¾ç½®ç”¨æˆ·è¯­è¨€

```python
# åˆ‡æ¢åˆ°è‹±æ–‡
i18n.set_user_language(user_id, 'en')

# è·å–ç”¨æˆ·å½“å‰è¯­è¨€
lang = i18n.get_user_language(user_id)
```

### è·å–å¯ç”¨è¯­è¨€åˆ—è¡¨

```python
languages = i18n.get_available_languages()
# è¿”å›: {'zh': 'ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡', 'en': 'ğŸ‡ºğŸ‡¸ English'}
```

## ç¿»è¯‘æ–‡ä»¶æ ¼å¼

ç¿»è¯‘æ–‡ä»¶ä½¿ç”¨ JSON æ ¼å¼ï¼Œæ”¯æŒåµŒå¥—ç»“æ„ï¼š

```json
{
  "language_name": "ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡",
  
  "start": {
    "welcome": "æ¬¢è¿ä½¿ç”¨...",
    "button_check": "ğŸš€ è´¦å·æ£€æµ‹",
    "button_settings": "âš™ï¸ è®¾ç½®"
  },
  
  "settings": {
    "title": "âš™ï¸ <b>è®¾ç½®</b>",
    "language": "ğŸŒ è¯­è¨€è®¾ç½®"
  }
}
```

## æ·»åŠ æ–°è¯­è¨€

1. åœ¨ `locales/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ JSON æ–‡ä»¶ï¼Œä¾‹å¦‚ `ru.json`
2. å¤åˆ¶ç°æœ‰çš„ç¿»è¯‘æ–‡ä»¶ç»“æ„
3. ç¿»è¯‘æ‰€æœ‰æ–‡æœ¬
4. é‡å¯æœºå™¨äººï¼Œæ–°è¯­è¨€å°†è‡ªåŠ¨åŠ è½½

## ç‰¹æ€§

- âœ… è‡ªåŠ¨ç¼“å­˜ç¿»è¯‘ç»“æœï¼Œæé«˜æ€§èƒ½
- âœ… æ”¯æŒæ ¼å¼åŒ–å‚æ•°ï¼ˆ`{param}`ï¼‰
- âœ… åµŒå¥—é”®æ”¯æŒï¼ˆ`'start.button_check'`ï¼‰
- âœ… å›é€€æœºåˆ¶ï¼šå¦‚æœç”¨æˆ·è¯­è¨€ç¼ºå¤±ç¿»è¯‘ï¼Œè‡ªåŠ¨ä½¿ç”¨é»˜è®¤è¯­è¨€
- âœ… å¤šç”¨æˆ·è¯­è¨€éš”ç¦»ï¼šä¸åŒç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸åŒè¯­è¨€
- âœ… æŒä¹…åŒ–ç”¨æˆ·è¯­è¨€åå¥½

## æµ‹è¯•

è¿è¡Œæµ‹è¯•ä»¥éªŒè¯ i18n ç³»ç»Ÿï¼š

```bash
python3 << 'EOF'
from i18n import I18n

i18n = I18n(locales_dir='locales', default_lang='zh')

# æµ‹è¯•ä¸­æ–‡
user_zh = 12345
print(i18n.get(user_zh, 'start.button_check'))

# æµ‹è¯•è‹±æ–‡
user_en = 67890
i18n.set_user_language(user_en, 'en')
print(i18n.get(user_en, 'start.button_check'))
EOF
```

## æ³¨æ„äº‹é¡¹

1. **å‚æ•°å‘½åå†²çª**ï¼šé¿å…ä½¿ç”¨ `user_id` ä½œä¸ºæ ¼å¼åŒ–å‚æ•°ï¼ˆå·²æ”¹ä¸º `uid`ï¼‰
2. **HTML æ ‡ç­¾**ï¼šç¿»è¯‘æ–‡æœ¬ä¸­å¯ä»¥åŒ…å« HTML æ ‡ç­¾
3. **Emoji**ï¼šå»ºè®®åœ¨ç¿»è¯‘ä¸­ä¿ç•™ emoji ä»¥ä¿æŒä¸€è‡´çš„è§†è§‰æ•ˆæœ
4. **å‚æ•°ä¸€è‡´æ€§**ï¼šç¡®ä¿åŒä¸€ç¿»è¯‘é”®åœ¨æ‰€æœ‰è¯­è¨€æ–‡ä»¶ä¸­ä½¿ç”¨ç›¸åŒçš„å‚æ•°åç§°
